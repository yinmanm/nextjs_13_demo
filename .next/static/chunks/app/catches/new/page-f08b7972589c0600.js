(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{7168:function(e,s,t){Promise.resolve().then(t.bind(t,2545))},6841:function(e,s,t){"use strict";t(5834);var i=t(9838);s.Z=(0,i.Z)("ecaa478d5d44c2bd4bf4b2639ea1aa5821711eb9")},2545:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var i=t(3955);t(5378);var a=t(4589),l=t(6008),n=t(2310),r=t(6841);t(5834);var c=t(9838),d=(0,c.Z)("14f9872ba0fb2262d7275f4ce8a8db2308e7dfd5"),o=(0,c.Z)("fc5ac97d6813b4151e14ee1e830c166f29bc2303"),m=(0,c.Z)("7f8dfb8e22a35e6f3a95a9ea31b81c0690d6727d");function u(){let e=(0,l.useRouter)(),[s,t]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[x,g]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[f,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(new Date),[N,j]=(0,n.useState)(""),[w,k]=(0,n.useState)([]),[C,S]=(0,n.useState)(""),[z,q]=(0,n.useState)(""),[H,M]=(0,n.useState)(""),[A,E]=(0,n.useState)(0),[Z,_]=(0,n.useState)(0),D=async()=>{g(await (0,r.Z)())},F=async()=>{p(await d())},O=async e=>{S(e.target.value);let s=document.getElementById("category"),t=s.selectedIndex;q(s.options[t].text)},V=async s=>{if(t(!0),s.preventDefault(),v&&N&&w.length>0)try{let s={data_landed:v,buyer:{connect:{id:Number(N)}},user:{connect:{id:1}}},i=await o(JSON.stringify(s));console.log("client",i),w.map(async e=>{let s={category:{connect:{id:Number(e.category)}},categoryName:e.categoryName,description:e.description,quantity:Number(e.quantity),price:Number(e.price),total:Number(e.quantity)*Number(e.price),catches:{connect:{id:Number(i.id)}}};await m(JSON.stringify(s))}),e.push("/catches"),t(!1)}catch(e){console.log(e),t(!1)}else t(!1)},L=async e=>{u(!0),e.preventDefault(),C&&H&&A&&Z&&(k([...w].concat([{category:C,categoryName:z,description:H,quantity:A,price:Z}])),M(""),E(0),_(0),y(!1)),u(!1)},P=(e,s)=>{let t=Number(e)*Number(s);return t};return(0,n.useEffect)(()=>{D(),F()},[]),(0,n.useEffect)(()=>{var e;j(null===(e=x[0])||void 0===e?void 0:e.id)},[x]),(0,n.useEffect)(()=>{var e,s;S(null===(e=h[0])||void 0===e?void 0:e.id),q(null===(s=h[0])||void 0===s?void 0:s.name)},[h]),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsx)("form",{onSubmit:V,className:"",action:"#",method:"POST",children:(0,i.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h2",{className:"text-base sm:text-2xl font-semibold leading-7 sm:leading-tight text-gray-900",children:"Create new catch"}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-6",children:[(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"date-landed",className:"block text-sm font-medium leading-6 text-gray-900",children:"Date landed"}),(0,i.jsxs)("div",{className:"mt-2 relative",children:[(0,i.jsx)(a.Z,{"data-enable-time":!0,value:v,dateformat:"Y-m-d H:i",onChange:e=>b(e[0]),className:"block w-full rounded-md border-0 py-2 px-4 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600"}),(0,i.jsx)("svg",{className:"absolute right-4 top-2 text-gray-400 w-5 pointer-events-none",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})})]})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"buyer",className:"block text-sm font-medium leading-6 text-gray-900",children:"Buyer"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("select",{id:"buyer",name:"buyer",required:!0,value:N,onChange:e=>{j(e.target.value)},className:"block w-full rounded-md border-0 py-2 px-4 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600",children:x.map((e,s)=>(0,i.jsx)("option",{value:e.id,children:e.email},e.id))})})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsx)("div",{className:"inline-block min-w-full py-2 align-middle",children:(0,i.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-normal text-gray-500",children:"Category"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-normal text-gray-500",children:"Description"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-normal text-gray-500",children:"Quantity"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-normal text-gray-500",children:"Price"}),(0,i.jsx)("th",{scope:"col",className:"py-3.5 pr-4 pl-3 text-right text-sm font-normal text-gray-500",children:"Total"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:w.map((e,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-4 pl-4 pr-3 text-sm text-gray-500",children:e.categoryName}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.description}),(0,i.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.quantity," kg"]}),(0,i.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:["$",e.price,"/kg"]}),(0,i.jsxs)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium",children:["$",P(e.quantity,e.price)]})]},s))})]})})})}),(0,i.jsx)("button",{type:"button",className:"mt-3 rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:()=>{y(!f)},children:"Add new item"})]})]})]})}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("button",{type:"submit",disabled:s,className:"block w-full rounded-md bg-indigo-600 px-3 py-3 text-sm font-semibold text-white text-center shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Create"})})]})})}),f&&(0,i.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:[(0,i.jsx)("div",{className:"absolute inset-0 z-0",onClick:()=>{y(!f)}}),(0,i.jsxs)("div",{className:"w-full relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,i.jsx)("div",{className:"absolute right-0 top-0 pr-4 pt-4",onClick:()=>{y(!f)},children:(0,i.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,i.jsx)("span",{className:"sr-only",children:"Close"}),(0,i.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,i.jsx)("form",{onSubmit:L,className:"",action:"#",method:"POST",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Add new item"}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-6",children:[(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium leading-6 text-gray-900",children:"Category"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("select",{id:"category",name:"category",required:!0,value:C,onChange:e=>{O(e)},className:"block w-full rounded-md border-0 py-2 px-4 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600",children:h.map((e,s)=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))})})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-gray-900",children:"Description"}),(0,i.jsx)("div",{className:"mt-2 relative",children:(0,i.jsx)("input",{type:"text",name:"description",id:"description",required:!0,value:H,onChange:e=>M(e.target.value),className:"block w-full rounded-md border-0 py-2 px-4 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"})})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"quantity",className:"block text-sm font-medium leading-6 text-gray-900",children:"Quantity"}),(0,i.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,i.jsx)("input",{type:"number",name:"quantity",id:"quantity",required:!0,value:A,onChange:e=>E(e.target.value),className:"block w-full rounded-md border-0 py-2 px-4 pr-12 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"}),(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,i.jsx)("span",{className:"text-gray-500 sm:text-sm",id:"price-currency",children:"KG"})})]})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium leading-6 text-gray-900",children:"Price"}),(0,i.jsxs)("div",{className:"relative mt-2 rounded-md shadow-sm",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,i.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),(0,i.jsx)("input",{type:"number",name:"price",id:"price",required:!0,value:Z,onChange:e=>_(e.target.value),className:"block w-full rounded-md border-0 py-2 pl-7 pr-12 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"}),(0,i.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,i.jsx)("span",{className:"text-gray-500 sm:text-sm",id:"price-currency",children:"KG"})})]})]})]})]})}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("button",{type:"submit",disabled:c,className:"block w-full rounded-md bg-indigo-600 px-3 py-3 text-sm font-semibold text-white text-center shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Create"})})]})})]})]})})]})]})}}},function(e){e.O(0,[695,875,474,744],function(){return e(e.s=7168)}),_N_E=e.O()}]);